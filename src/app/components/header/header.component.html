<!-- Desktop header -->
<header class="desktop-header hidden lg:block shadow-md px-[3.3%] bg-white  fixed left-0 right-0 z-50"
  [class.hidden]="!isHeaderVisible">
  <div class="py-5 3xl:py-7 flex justify-between items-center">
    <a routerLink="/">
      <img class="w-44 3xl:w-[220px] object-cover cursor-pointer" src="assets/header/blogo.png" alt="logo" />
    </a>
    <div class="flex items-center gap-9 3xl:gap-12 3xl:-ml-20">
      <ng-container *ngFor="let item of menuItems">
        <div class="relative cursor-pointer">
          <a [ngClass]="{
            'text-teal1': (item.label !== 'About' && activeMenuItem === item.label) || (item.label === 'About' && currentRoute === '/about'),
            'text-dark-gray1': activeMenuItem !== item.label && item.label !== 'About'
          }" (click)="item.dropdown ? toggleBottomSection(item.dropdown, item.label) : menu(item.label)"
            [routerLink]="item.link" routerLinkActive="text-teal1" class="3xl:text-xl text-dark-gray1 hover:text-teal1">
            {{ item.label }}
            <i *ngIf="item.dropdown"
              class="fa-solid fa-chevron-down text-sm 3xl:text-base transition-transform duration-300 ease-[cubic-bezier(1,0.25,0.25,.8)]"
              [ngClass]="{
              '-rotate-180 text-teal1': activeMenuItem === item.label && item.dropdown,
              'rotate-135 text-dark-gray1': activeMenuItem !== item.label && item.dropdown
            }"></i>
          </a>

          <div *ngIf="activeBottomSection === 'featured'"
            class="p-2 3xl:p-[10px] bg-card-gray rounded-br-lg rounded-bl-lg absolute left-1/2 transform -translate-x-1/2 top-[68px] 3xl:top-[88px] z-50">
            <div class="flex justify-center items-center gap-2 3xl:gap-[10px]">
              <a *ngFor="let item of featuredProductItems"
                class="w-52 3xl:w-60 inline-block bg-white border border-light-gray1 pt-6 3xl:pt-8 px-6 3xl:px-8 rounded-lg text-center cursor-pointer"
                [routerLink]="item.link">
                <p
                  class="text-dark-gray2 hover:text-teal2 text-xs 3xl:text-[15px] 3xl:leading-[22.5px] font-medium 3xl:font-semibold mb-3 3xl:mb-[14px]">
                  {{ item.label }}</p>
                <img class="rounded-tl-lg rounded-tr-lg" src="assets/header/featured-products.png" />
              </a>
            </div>
          </div>

          <div *ngIf="activeBottomSection === 'resources' && item.dropdown === 'resources'"
            class="w-[36rem] 3xl:w-[45rem] p-2 3xl:p-[10px] flex gap-2 3xl:gap-[10px] bg-card-gray absolute left-0 transform -translate-x-[70%] top-[68px] 3xl:top-[88px] z-50 rounded-br-lg rounded-bl-lg">
            <div
              class="w-[38rem] 3xl:w-[46rem] bg-white border border-light-gray1 p-6 3xl:p-8 pr-0 text-sm text-nowrap rounded-lg">
              <div *ngFor="let item of resourceItems">
                <a class="inline-block text-dark-gray2 hover:text-teal2 text-xs 3xl:text-[15px] 3xl:leading-[22.5px] font-medium 3xl:font-semibold cursor-pointer mb-3 3xl:mb-[14px]"
                  routerLink="item.link">{{ item.label }}</a>
              </div>
            </div>
            <div class="bg-dark-gray2 pt-6 3xl:pt-8 px-6 3xl:px-8 rounded-lg">
              <h3 class="text-sm 3xl:text-[15px] font-medium 3xl:font-semibold mb-6 3xl:mb-8 text-light-gray1">
                Featured Article
              </h3>
              <div class="pt-6 3xl:pt-8 px-6 3xl:px-8 bg-white rounded-tl-lg rounded-tr-lg">
                <h3 class="text-xl 3xl:text-2xl font-bold text-dark-gray2 mb-6 3xl:mb-8">
                  Interesting Blog Title that <br> Can Fit On Two Lines
                </h3>
                <img class="object-cover" src="assets/header/resources.png" alt="img" />
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>

    <div class="flex items-center gap-8 ">
      <i (click)="toggleSearchbar()"
        class="bi bi-search text-xl 3xl:text-2xl cursor-pointer hover:text-teal1 duration-300"></i>
      <!-- Search bar container -->
      <div *ngIf="isSearchbaropen"
        class="p-[6px] 3xl:p-[10px] bg-card-gray fixed left-1/2 transform -translate-x-1/2 top-28 3xl:top-36 z-50 rounded-br-md 3xl:rounded-br-lg rounded-bl-md 3xl:rounded-bl-lg w-[72%]">
        <div
          class="flex items-center justify-center gap-6 3xl:gap-8 px-12 3xl:px-20 py-6 3xl:py-8 bg-white rounded-md 3xl:rounded-lg">
          <div
            class="w-[80%] flex items-center gap-3 3xl:gap-4 rounded-md 3xl:rounded-lg border border-dark-gray2 bg-card-gray px-5 py-2"
            [ngClass]="{'border-teal1': searchText, 'border-dark-gray2': !searchText}">
            <i class="bi bi-search text-lg 3xl:text-xl text-light-gray1 cursor-pointer"></i>
            <input type="search" placeholder="Search" (focusin)=focusin() (focusout)=focusout()
              class="w-full py-1 text-sm 3xl:text-base bg-transparent focus:outline-none placeholder-light-gray1 focus:placeholder-transparent" />
          </div>
          <app-cbutton2 routerLink="/404" heading="Search" size="large" bg="white"></app-cbutton2>
          <i (click)="toggleSearchbar()"
            class="bi bi-x-lg text-2xl 3xl:text-3xl cursor-pointer hover:text-teal1 ml-3"></i>
        </div>
      </div>

      <a href="https://webforms.pipedrive.com/f/6iCHNNECUuqORf9rWJgygfwg3GR0OuWejL9ZkdXTDfW1Z5Gu2Kc2odVMCTOHP8Ub4L"
        target="_blank"><app-cbutton heading="Contact us" icon="assets/header/r-arrow.svg"
          [size]="'medium'"></app-cbutton></a>
    </div>
  </div>

  <div *ngIf="activeBottomSection" class="absolute left-1/2 transform -translate-x-1/2 pb-1 z-50 w-[82%]">
    <ng-container *ngIf="activeBottomSection === 'service'">
      <div class="p-2 3xl:p-[10px] bg-card-gray rounded-br-lg rounded-bl-lg">
        <div class="flex gap-2 3xl:gap-[10px]">
          <div class="w-2/3 rounded-lg bg-white border border-light-gray1">
            <app-header-section class="" [sections]="serviceSections"></app-header-section>
            <div class="p-6 3xl:p-8">
              <button routerLink="/services"
                class="diagonal-swipe  w-full  relative overflow-hidden rounded-lg cursor-pointer text-nowrap px-[18px] py-[11px] text-lg font-medium border-[1px] border-teal2">
                <span class="font-medium 3xl:font-semibold flex justify-between items-center">
                  All services
                  <ng-container>
                    <img src="assets/services/r-arrow.svg" alt="icon" class=" w-6 h-6" />
                  </ng-container>
                </span>
              </button>
            </div>
          </div>
          <div class="w-1/3 p-6 3xl:p-8 rounded-lg bg-dark-gray2 flex flex-col justify-between">
            <div>
              <h3 class="text-sm 3xl:text-[15px] font-medium 3xl:font-semibold mb-6 3xl:mb-8 text-light-gray1">
                Industries
              </h3>
              <div class="flex items-center flex-wrap gap-2">
                <a *ngFor="let industry of industries"
                  class="bg-dark-gray1 py-1 px-2 rounded-[4px] text-white inline-block text-xs 3xl:text-sm"
                  routerLink="item.link">{{ industry }}</a>
              </div>
            </div>
            <div>
              <h3 class="text-xs 3xl:text-[15px] font-medium 3xl:font-semibold mb-6 3xl:mb-8 text-light-gray1">
                Featured Blog
              </h3>
              <div class="bg-white px-6 3xl:px-8 pt-6 3xl:pt-8 pb-1 rounded-md 3xl:rounded-lg">
                <h2 class="text-xl 3xl:text-2xl font-bold text-dark-gray2 mb-6 3xl:mb-8">
                  Interesting Blog Title that <br />
                  Can Fit On Two Lines
                </h2>
                <img class="object-contain w-full" src="assets/header/featured-blog.png" alt="blog-img" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</header>

<div *ngIf="activeBottomSection" (click)="closeMenu()"
  class="hidden lg:block fixed h-full w-full top-28 3xl:top-36 z-40 bg-[#00000080]">
</div>
<div *ngIf="isSearchbaropen" (click)="closeMenu()"
  class="hidden lg:block fixed h-full w-full top-28 3xl:top-36 z-40 bg-[#00000080]">
</div>


<!-- Mobile header -->
<header class="mobile-header block lg:hidden shadow-sm px-[3%]">
  <div class="py-5 flex justify-between items-center ">
    <a routerLink="/">
      <img class="w-36 object-cover cursor-pointer" src="assets/header/blogo.png" alt="logo" />
    </a>
    <div>
      <i (click)="toggleSearchbar()"
        class="fa-solid fa-search fa-xl text-dark-gray2 hover:text-teal1 duration-300 mr-8"></i>
      <!-- Search bar container -->
      <div *ngIf="isSearchbaropen"
        class="p-2 bg-card-gray fixed left-1/2 transform -translate-x-1/2 top-24 z-50 rounded-br-md rounded-bl-md w-full">
        <div class="flex items-center justify-center gap-3 px-2 py-4 bg-white rounded-md">
          <div class="flex items-center gap-3 rounded-md border px-2 py-1 w-full bg-card-gray duration-300"
            [ngClass]="{'border-teal1': searchText, 'border-dark-gray2': !searchText}">
            <i class="bi bi-search text-lg text-light-gray1 cursor-pointer"></i>
            <input type="search" (focusin)=focusin() (focusout)=focusout() placeholder="Search"
              class="w-full py-1 text-sm bg-transparent focus:outline-none placeholder-light-gray1 focus:placeholder-transparent" />
          </div>
          <app-cbutton2 routerLink="/404" heading="Search" size="large" bg="white"></app-cbutton2>
          <i (click)="toggleSearchbar()" class="bi bi-x-lg text-xl cursor-pointer hover:text-teal1 ml-2"></i>
        </div>

      </div>
      <i (click)="toggleMenuSection()" [ngClass]="isMenuOpen ? 'fa-solid fa-2xl fa-xmark' : 'fa-solid fa-2xl fa-bars'"
        class="transition-transform duration-500 ease-in-out"></i>
    </div>

  </div>
  <app-accordion *ngIf="isAccordionOpen" (menuLinkClicked)="toggleMenuSection()"></app-accordion>
</header>